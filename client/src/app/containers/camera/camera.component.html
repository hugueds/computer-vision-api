<ng-container class="camera-container">

  <div class="navbar-wrapper">
    
      <span>LEITURA {{ identifier?.typeString }} / MODELO {{ instance?.name }}</span>      
    
  </div>

  <div class="instruction-wrapper">
    <div class="instruction">
      <span>{{ step.number + 1 }} INSTRUÇÃO: {{ step.name }}</span>
    </div>
    <div class="identifier">
      <span>ID: {{ identifier.value }} </span>
    </div>
  </div>

  <div class="camera-preview" [style.background]="preview.background">

    <div class="camera-card" [ngClass]="{ 'hidden': cameraMode != CAMERA_MODE.BARCODE }">
      <div class="barcode-wrapper--mobile">
        <div id="barcode"></div>
      </div>
    </div>

    <div class="camera-card" [ngClass]="{ 'hidden': cameraMode != CAMERA_MODE.CAMERA }">      
        <video #video id="video" autoplay="true" width="640" height="480" ></video>      
    </div>

    <div class="camera-control" [ngClass]="{ 'hidden': (isMobile || cameraMode == CAMERA_MODE.PREVIEW) }">
      <button mat-fab id="camera-button" (click)="takePicture()">
        <img class="camera-icon" src="assets/icons/camera.png" />
      </button>
    </div>

    <div class="camera-card" [ngClass]="{ 'hidden': cameraMode != CAMERA_MODE.PREVIEW }">
      <canvas #canvas id="canvas"></canvas>
    </div>

  </div>

  <div class="camera-button-container--mobile" [ngClass]="{'hidden' : (!isMobile) }">
    <button mat-button id="camera-button--mobile" (click)="takePicture()">
      <img class="camera-icon" src="assets/icons/camera.png" />
    </button>
  </div>



  <div class="button-control" [ngClass]="{ 'hidden': cameraMode != CAMERA_MODE.PREVIEW && !loading}">
    <button
      mat-button
      color="primary"
      class="button-control--button button-control--button__notok"
      (click)="cancel()"
    >
      NOT OK
    </button>
    <button
      mat-button
      color="secondary"
      class="button-control--button button-control--button__ok"
      [disabled]="loading"
      (click)="classify()"
    >
      OK
    </button>
  </div>

  <div class="result-preview">
    <span>
      PREVIA: {{ preview?.label }} - {{ preview?.confidence.toFixed(2) * 100 }} %
    </span>
  </div>

  
  <div
    class="last-result"
    [ngClass]="{ 'hidden': cameraMode == CAMERA_MODE.PREVIEW }"
  >
  
    <span>
      RESULTADO: {{ identifier?.lastValue }} {{ response?.content.result }} -
      {{ response?.content.confidence * 100 }}% - {{ 0 }}
    </span>
    <button mat-button (click)="offlinePredict()">VER MAIS</button>
  </div>

</ng-container>
